# Blood on the Clocktower Grimoire & Town Square

This is a fork of the original clocktower.live tool with integrated game tracking and support for my bot Grimkeeper. (Read API coming soon :p)

**What's New:**

- **Game tracking**: Starting roles, final roles, win/loss stats per player
- **Discord integration**: Link your Discord account, claim seats, automatic stat attribution
- **Modernized UI**: Improved typography and visual polish

**Original features** (public grimoire, live sessions, custom scripts, all editions) remain intact.

[Grimkeeper documentation](https://github.com/gorewife/grimkeeper).

---

## Features

- Public Town Square and Storyteller Grimoire (toggle with **shortcut \[G\]**)
- Supports custom script JSON generated by the [Script Tool](https://bloodontheclocktower.com/script)
- Live Session for Storyteller / Players including live voting and character distribution!
- Includes all 3 base editions, Travellers, Fabled and Loric plus all experimental characters!
- Night sheet and reminder text for each character ability to help storytellers
- Full homebrew support for hosting and playing games with your own sets of characters
- Many other customization options!

### Custom Script Support

Any custom script generated by the official [Script Tool](https://script.bloodontheclocktower.com/) is supported out of
the box and you only need to upload it to get the selected set of characters into your grimoire. If you want to customize
your script further, there is an additional `"_meta"` object that you can add to the script like you would add a normal
character:

```json
[
  {
    "id": "_meta",
    "name": "Deadly Penance Day",
    "author": "TPI",
    "logo": "https://url.to/your/logo.png"
  }
]
```

This will provide your local Grimoire (and those of your live session players) with more information to show about
your custom script - instead of "Custom Script" it would show "Deadly Penance Day" on the character reference sheet,
for example. The logo will be shown to your players after they have enabled custom images in the Grimoire menu.

### Custom Character Support

In order to add custom characters to your local Grimoire, you need to create a JSON definition for them,
similar to what is provided in the [`roles.json`](https://github.com/bra1n/townsquare/blob/main/src/roles.json) for the 3 base editions. Here's an example of how such a character
definition file might be written:

```json
[
  {
    "id": "acrobat",
    "image": "https://github.com/bra1n/townsquare/blob/main/src/assets/icons/acrobat.png?raw=true",
    "edition": "custom",
    "firstNight": 0,
    "firstNightReminder": "",
    "otherNight": 18,
    "otherNightReminder": "The Acrobat points to a player. If that player is or becomes drunk or poisoned tonight, the Acrobat dies.",
    "reminders": [
      "Chosen",
      "Dead"
    ],
    "remindersGlobal": [],
    "setup": false,
    "name": "Acrobat",
    "team": "townsfolk",
    "ability": "Each night*, choose a player: if they are or become drunk or poisoned tonight, you die."
  },
  "investigator",
  "imp"
]
```

This definition JSON includes a custom character, the Acrobat, and 2 base game characters, the Investigator and the Imp.
For base game characters, it is sufficient to provide only the ID as a string, similar to what you get from the Script Tool.

**Required properties:** `id`, `name`, `team`, `ability`

- **id**: the internal ID for this character, without spaces or special characters
  _Note_: this ID needs to be unique and can't be the same as any ID already used by an existing character, otherwise the custom character will be overwritten with the existing role!
- **image**: a URL to a PNG of the character token icon (should have a transparent background!)
  _Note_: custom images will only be visible after enabling them in the Grimoire menu!
- **edition**: the ID of the edition for this character. can be left blank or "custom"
- **firstNight** / **otherNight**: the position that this character acts on the first / other nights, compared to all
  other characters
  _Note_: must be a positive number or zero, with zero being treated as "does not act during the night"
- **firstNightReminder** / **otherNightReminder**: reminder text for first / other nights
- **reminders**: reminder tokens, should be an empty array `[]` if none
- **remindersGlobal**: global reminder tokens that will always be available, no matter if the character is assigned to a player or not
- **setup**: whether this token affects setup (orange leaf), like the Drunk or Baron
- **name**: the displayed name of this character
- **team**: the team of the character, has to be one of `townsfolk`, `outsider`, `minion`, `demon`, `traveller`, `fabled` or `loric`
  _Note_: if you create a custom Fabled or Loric character, it will be automatically added to the game when the custom script is loaded
- **ability**: the displayed ability text of the character

For further details on the JSON structure, see the official app's [JSON Schema](https://github.com/ThePandemoniumInstitute/botc-release/blob/main/script-schema.json)

## [Code of Conduct](CODE_OF_CONDUCT.md)

## [Contributing](CONTRIBUTING.md)

## Acknowledgements and Copyrights

- [Blood on the Clocktower](https://bloodontheclocktower.com/) is a trademark of Steven Medway and [The Pandemonium Institute](https://www.thepandemoniuminstitute.com/)
- Night reminders and other auxiliary text written by [Ben Finney](http://bignose.whitetree.org/projects/botc/diy/)
- Iconography by [Font Awesome](https://fontawesome.com/)
- Background image copyright and permission granted by [Ryan Maloney](https://www.artstation.com/maloney94)
- Webfonts by [Google Fonts](https://fonts.google.com/) and [Online Web Fonts](https://www.onlinewebfonts.com/)
- All other images and icons are copyright to their respective owners

This project and its website are provided free of charge and not affiliated with The Pandemonium Institute in any way.

## Credits

- [Bra1n](https://github.com/bra1n) for building the original clocktower.live in 2021

- Forked from [nicholas-eden/townsquare](https://github.com/nicholas-eden/townsquare)
- This fork maintained by [gorewife](https://github.com/gorewife)
